(window.webpackJsonp=window.webpackJsonp||[]).push([[8,4],{269:function(e,t,r){var content=r(273);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(76).default)("38531132",content,!0,{sourceMap:!1})},272:function(e,t,r){"use strict";r(269)},273:function(e,t,r){var n=r(75)(!1);n.push([e.i,".registration[data-v-11e44f76]{display:flex;justify-content:center;align-items:center}.registration__card[data-v-11e44f76]{max-width:450px}.registration__field-label[data-v-11e44f76]{color:rgba(0,0,0,.53725)}.registration__button[data-v-11e44f76]{padding:0 10px}",""]),e.exports=n},275:function(e,t,r){"use strict";r.r(t);var n=r(10),o=(r(60),r(140),{name:"Registration",data:function(){return{data:{email:null,last_name:null,first_name:null,middle_name:null,phone:null,user_role:"ROLE_STUDENT",password:null,password_confirmation:null},value:null,roles:[{id:"ROLE_STUDENT",name:"Студент"},{id:"ROLE_TEACHER",name:"Преподаватель"}],sending:!1,isRegistrationError:!1}},methods:{getErrors:function(e){return this.veeErrors.collect(e).join(". ")},handleSubmit:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isRegistrationError=!1,t.next=3,e.$validator.validateAll();case 3:if(t.sent){t.next=5;break}return t.abrupt("return");case 5:return e.sending=!0,t.next=8,e.$axios.$post("/auth/registration",e.data);case 8:if(r=t.sent,e.sending=!0,!r.user){t.next=18;break}return t.next=14,e.$auth.loginWith("local",{data:{email:e.data.email,password:e.data.password}});case 14:t.sent,window.location.href="/",t.next=19;break;case 18:e.isRegistrationError=!0;case 19:e.sending=!1;case 20:case"end":return t.stop()}}),t)})))()}}}),d=(r(272),r(45)),component=Object(d.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"registration"},[r("md-card",{staticClass:"registration__card"},[r("md-card-header",[r("div",{staticClass:"md-title"},[e._v("Регистрация")])]),e._v(" "),r("md-card-content",[r("form",{staticClass:"md-layout",on:{submit:function(t){return t.preventDefault(),e.handleSubmit.apply(null,arguments)}}},[r("md-field",{class:{"md-invalid":e.veeErrors.has("email")}},[r("label",{attrs:{for:"email"},domProps:{textContent:e._s("E-mail")}}),e._v(" "),r("md-input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0,email:!0},expression:"{ required: true, email: true }"}],attrs:{name:"email",id:"email",disabled:e.sending,"data-vv-as":" "},model:{value:e.data.email,callback:function(t){e.$set(e.data,"email",t)},expression:"data.email"}}),e._v(" "),e.veeErrors.has("email")?r("span",{staticClass:"md-error",domProps:{textContent:e._s(e.getErrors("email"))}}):e._e()],1),e._v(" "),r("md-field",{class:{"md-invalid":e.veeErrors.has("last_name")}},[r("label",{attrs:{for:"email"},domProps:{textContent:e._s("Фамилия")}}),e._v(" "),r("md-input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0},expression:"{ required: true }"}],attrs:{name:"last_name",id:"last_name",disabled:e.sending,"data-vv-as":" "},model:{value:e.data.last_name,callback:function(t){e.$set(e.data,"last_name",t)},expression:"data.last_name"}}),e._v(" "),e.veeErrors.has("last_name")?r("span",{staticClass:"md-error",domProps:{textContent:e._s(e.getErrors("last_name"))}}):e._e()],1),e._v(" "),r("md-field",{class:{"md-invalid":e.veeErrors.has("first_name")}},[r("label",{attrs:{for:"first_name"},domProps:{textContent:e._s("Имя")}}),e._v(" "),r("md-input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0},expression:"{ required: true }"}],attrs:{name:"first_name",id:"first_name",disabled:e.sending,"data-vv-as":" "},model:{value:e.data.first_name,callback:function(t){e.$set(e.data,"first_name",t)},expression:"data.first_name"}}),e._v(" "),e.veeErrors.has("first_name")?r("span",{staticClass:"md-error",domProps:{textContent:e._s(e.getErrors("first_name"))}}):e._e()],1),e._v(" "),r("md-field",{class:{"md-invalid":e.veeErrors.has("middle_name")}},[r("label",{attrs:{for:"middle_name"},domProps:{textContent:e._s("Отчество")}}),e._v(" "),r("md-input",{attrs:{name:"middle_name",id:"middle_name",disabled:e.sending,"data-vv-as":" "},model:{value:e.data.middle_name,callback:function(t){e.$set(e.data,"middle_name",t)},expression:"data.middle_name"}}),e._v(" "),e.veeErrors.has("middle_name")?r("span",{staticClass:"md-error",domProps:{textContent:e._s(e.getErrors("middle_name"))}}):e._e()],1),e._v(" "),r("md-field",{class:{"md-invalid":e.veeErrors.has("phone")}},[r("label",{attrs:{for:"phone"},domProps:{textContent:e._s("Телефон")}}),e._v(" "),r("md-input",{attrs:{name:"phone",id:"phone",disabled:e.sending,"data-vv-as":" "},model:{value:e.data.phone,callback:function(t){e.$set(e.data,"phone",t)},expression:"data.phone"}}),e._v(" "),e.veeErrors.has("phone")?r("span",{staticClass:"md-error",domProps:{textContent:e._s(e.getErrors("phone"))}}):e._e()],1),e._v(" "),r("div",{class:{"md-invalid":e.veeErrors.has("user_role")}},[r("div",{staticClass:"registration__field-label",domProps:{textContent:e._s("Кто вы?")}}),e._v(" "),e._l(e.roles,(function(t){return r("md-radio",{key:t.id,attrs:{value:t.id},model:{value:e.data.user_role,callback:function(t){e.$set(e.data,"user_role",t)},expression:"data.user_role"}},[e._v(e._s(t.name))])})),e._v(" "),e.veeErrors.has("user_role")?r("span",{staticClass:"md-error",domProps:{textContent:e._s(e.getErrors("user_role"))}}):e._e()],2),e._v(" "),r("md-field",{class:{"md-invalid":e.veeErrors.has("password")}},[r("label",{attrs:{for:"password"},domProps:{textContent:e._s("Пароль")}}),e._v(" "),r("md-input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0},expression:"{ required: true }"}],attrs:{name:"password",id:"password",disabled:e.sending,type:"password","data-vv-as":" "},model:{value:e.data.password,callback:function(t){e.$set(e.data,"password",t)},expression:"data.password"}}),e._v(" "),e.veeErrors.has("password")?r("span",{staticClass:"md-error",domProps:{textContent:e._s(e.getErrors("password"))}}):e._e()],1),e._v(" "),r("md-field",{class:{"md-invalid":e.veeErrors.has("password_confirmation")}},[r("label",{attrs:{for:"password_confirmation"},domProps:{textContent:e._s("Повторите пароль")}}),e._v(" "),r("md-input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0,password_confirmation:e.data.password},expression:"{ required: true, password_confirmation: data.password }"}],attrs:{name:"password_confirmation",id:"password_confirmation",disabled:e.sending,type:"password","data-vv-as":" "},model:{value:e.data.password_confirmation,callback:function(t){e.$set(e.data,"password_confirmation",t)},expression:"data.password_confirmation"}}),e._v(" "),e.veeErrors.has("password_confirmation")?r("span",{staticClass:"md-error",domProps:{textContent:e._s(e.getErrors("password_confirmation"))}}):e._e()],1),e._v(" "),e.sending?r("md-progress-bar",{attrs:{"md-mode":"indeterminate"}}):e._e(),e._v(" "),r("md-button",{staticClass:"md-raised md-primary registration__button",attrs:{type:"submit",disabled:e.sending},domProps:{textContent:e._s("Зарегистрироваться")}})],1)])],1),e._v(" "),r("md-snackbar",{staticClass:"md-error",attrs:{"md-position":"center","md-duration":4e3,"md-active":e.isRegistrationError,"md-persistent":""},on:{"update:mdActive":function(t){e.isRegistrationError=t},"update:md-active":function(t){e.isRegistrationError=t}}},[r("span",{domProps:{textContent:e._s("Зарегистрироватсья не удалось")}}),e._v(" "),r("md-button",{staticClass:"md-primary",domProps:{textContent:e._s("Хорошо")},on:{click:function(t){e.isRegistrationError=!1}}})],1)],1)}),[],!1,null,"11e44f76",null);t.default=component.exports},281:function(e,t,r){"use strict";r.r(t);var n={name:"index",auth:!1,components:{Registration:r(275).default}},o=r(45),component=Object(o.a)(n,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("Registration")],1)}),[],!1,null,"2ce642b6",null);t.default=component.exports;installComponents(component,{Registration:r(275).default})}}]);